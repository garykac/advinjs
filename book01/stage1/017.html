<html>
<head>
<title>017 : Friction</title>

<link rel="stylesheet" href="../../css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="../../css/style.css" />
<link href='http://fonts.googleapis.com/css?family=Trade+Winds' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Sacramento' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Piedra' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Aclonica' rel='stylesheet' type='text/css'>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-17513364-1']);
	_gaq.push(['_setDomainName', 'cse4k12.org']);
	_gaq.push(['_setAllowLinker', true]);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

</head>

<body>
<div class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container"><div class="navbar-header">
<a class="navbar-brand" href="../index.html"><span class="title1">Adventures in</span> <span class="title2">JavaScript</span></a>
</div></div></div>
<div class="container">
<h1>017 : Friction</h1>
<div class="name">You:</div><p class="you">So how are we going to fix the player moving too far?</p>
<div class="name">Balthazar:</div><p class="balthazar">By adding friction. You already have a friction value (<span class="code-inline-color">0.15</span>), so all you have to do is multiply the player's velocity by <span class="code-inline-color">(1 - friction)</span> each time you update the player. In our case, you'll be multiplying by 0.85 (= 1 - 0.15).</p>
<div class="name">Balthazar:</div><p class="balthazar">This will cause the velocity to slowly decrease based on how much friction we specify. Higher friction values will cause the player to slow down more quickly. Lower friction will have the player slide for a longer time before stopping.</p>
<div class="panel panel-default">
<div class="panel-code-header">Slow the player down by applying friction.</div><div class="panel-code code"><span class="context">function update_player() {</span>
<span class="context">    check_input();</span>
<span class="context"></span>
<img src="../../css/plus.png" width="15" height="15"/><span class="add">    // Apply the global world effects on the player.</span>
<img src="../../css/plus.png" width="15" height="15"/><span class="add">    _player.velocity_x *= (1.0 - _game.friction);</span>
<img src="../../css/plus.png" width="15" height="15"/><span class="add"></span>
<span class="context">    // Move the player to the new location.</span>
<span class="context">    _player.x += _player.velocity_x;</span>
<span class="context">    _player.y += _player.velocity_y;</span>
<span class="context">}</span>
</div>
<div class="panel-code-footer">Run your code in a browser and verify that there are no errors.</div></div>
<div class="name">You:</div><p class="you">If I keep multiplying by 0.85, the number will keep getting smaller and smaller, but it'll never reach 0. Doesn't that mean that the player will keep sliding forever?</p>
<div class="name">Balthazar:</div><p class="balthazar">Mathematically, the velocity won't ever reach 0, but practically once the velocity is less than 0.01 the player won't be moving on the screen anymore.</p>
<p class="alert alert-success"><strong>Congratulations!</strong> You've earned the <span class="badge-gain">Movement II - Friction</span> badge!</p>
<p class="alert alert-info"><a href="016.html"><span class="goto">GOTO 016</span></a> if you want to experiment with different friction values</p>
<p class="alert alert-info"><a href="018.html"><span class="goto">GOTO 018</span></a></p>
</div>
</body>
</html>
